imports:
- ../cmd/tpl_gen/yaml/settings.yaml
value_sets:
  go:
    package: stages
templates:
- template: ../cmd/tpl_gen/tpl/const_type.go.tpl
  out: stages.gen.go
  value_sets:
  - go
  - stages
  values:
    type_name: Stage
    type_desc: stage

# ---------------------------------------------------------------------------------
#                                  manual exchange
#   buyer                              | opr |  seller
# -------------------------------------|-----|-------------------------------------
#   sends proposal to seller           | --> |  receives proposal
#   receives proposal response         | <-- |  sends proposal response to buyer
#   generate redeem and recovery keys  |  G  |  generate redeem and recovery keys
#   generates a secret token           |  G  |
#   receives sellers redeem key hash   | <-- |  sends redeem key hash to buyer
#   generates lockscript (Lb)          |  G  |
#   sends lockscript to seller         | --> |  receives lockscript and check it
#
#   sends redeem key hash to seller    | --> |  receives buyers redeem key hash
#                                      |  G  |  generates lockscript (Ls)
#   receive lockscript and check it    | <-- |  sends lockscript to buyer
#   locks funds with lockscript Lb     | L/W |  waits for buyer lock transaction(s)
#
#   waits for seller transaction(s)    | W/L |  locks funds with lockscript Ls
#   redeems funds with token           | R/W |  waits for buyer redeem transaction and extract token
#                                      |  R  |  redeems funds with token
